<!DOCTYPE html>
<html>
<head>
  <title>Issues</title>
  <style>
    {% include 'css/styles.css' %}
  </style>
  <style>
    {% include 'css/tailwind.min.css' %}
  </style>
</head>
<body>
  <div page>
    <h1 title >Issues</h1>
    <div container>
        <ul header>
          <div title_group >
            {% set searchable = true -%}

            {% set col_name = "title" %}
            {% set col_field = "title" %}
            {% include "chunks/column_header.html" %}

            {% set col_name = "url" %}
            {% set searchable = false -%}
            {% include "chunks/column_header.html" %}

          </div>

          <div body_cell>
            {% set searchable = true -%}
            {% set col_name = "Body + Comments" %}
            {% set col_field = "body" %}
            {% include "chunks/column_header.html" %}

            {% set searchable = false -%}
          </div>
          {% for key,tag in all_tags %}
            {% if (loop.index - 1) % 3 == 0 or loop.index == 1 %}
              {% if loop.index > 1  %}
                </div>
              {% endif %}
              <div three_cell_group >
            {% endif %}

            {% set col_name = tag.name %}
            {% set col_options = tag.values %}
            {% include "chunks/column_header.html" %}
            
            {% if loop.last %}
              </div>
            {% endif %}
          {% endfor %}
        </ul>
      <!-- Rows below -->
      {% if issues[0] %}
        {% for issue in issues %}
          {# to give different color depending of the row number#}
          {% if loop.index % 2 == 0 %}
          <article pair_row  >

          {% else %}
          <article odd_row  >

          {% endif %}
            <div title_group >
              <div cell data_label="Title">
                <h2 title>{{ issue.title }}</h2> <!-- Title  -->
              </div>

              <div cell data_label="URL">
                <div > <!-- URL   -->
                  <a html_url target="_blank" href="{{issue.html_url}}">{{issue.html_url}}</a>
                </div>
              </div>

            </div>

            <div body_cell >
              <div cell  data_label="Body">
              {% if issue.body %}
                <p body> {{ issue.min_body }} </p> <!-- Body  -->
                {% set issue = issue %}
                {% include "chunks/comments_modal.html" %}
              {% endif %}

              </div>
            </div>
            {% for key,tag in all_tags %}
              {% if (loop.index - 1) % 3 == 0 or loop.index == 1 %}
                {% if loop.index > 1  %}
                  </div>
                {% endif %}
                <div three_cell_group >
              {% endif %}

              <div cell data_label="{{tag.name | capitalize }}">
                {% if issue.tags[tag.name] %}
                  <strong>{{issue.tags[tag.name]}}</strong>
                {% else %}
                  <strong>----</strong>
                {% endif %}
              </div>
              {% if loop.last %}
                </div>
              {% endif %}
            {% endfor %}
          </article>
        {% endfor %}
      {% endif %}
    </div>
  </div>

</body>
</html>